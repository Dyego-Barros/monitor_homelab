
default:
  enabled: false

prometheus:
  enabled: true
  replicaCount: 1

  image:
    repository: prom/prometheus
    pullPolicy: IfNotPresent
    tag: "v2.52.0"
  
  storageClass:
    create: false
    name: nfs-client
  service:
    type: ClusterIP
    port: 9090

  ingress:
    enabled: true
    className: "nginx"
    annotations:
      kubernetes.io/ingress.class: nginx
    hosts:
      - host: prometheus.dyego.lab
        paths:
          - path: /
            pathType: Prefix
    tls: []

  persistentVolume:
    create: false  # Defina como false já que você está usando storageClassName

  persistence:
    enabled: true
    #storageClassName: nfs-client
    accessModes:
      - ReadWriteMany
    size: 10Gi

  kubeStateMetrics:
    enabled: true
    fullnameOverride: prometheus-kube-state-metrics

  nodeExporter:
    enabled: true
    fullnameOverride: prometheus-node-exporter

  resources:
    limits:
      cpu: 200m
      memory: 256Mi
    requests:
      cpu: 100m
      memory: 128Mi

  autoscaling:
    enabled: false
    minReplicas: 1
    maxReplicas: 3
    targetCPUUtilizationPercentage: 80

  additionalScrapeConfigs:
    enabled: true
    name: prometheus-additional-scrape-configs
    key: additional-scrape-configs.yaml

  securityContext:
    runAsUser: 0

# grafana:
#   enabled: true
#   replicaCount: 1

#   image:
#     repository: grafana/grafana
#     tag: "10.0.0"
#     pullPolicy: IfNotPresent

#   persistence:
#     enabled: true
#     storageClassName: nfs-client
#     accessModes:
#       - ReadWriteMany
#     size: 10Gi

#   adminUser: admin
#   adminPassword: "@Dyego050291#"
#   service:
#     type: ClusterIP
#     port: 3000

#   ingress:
#     enabled: true
#     className: "nginx"
#     annotations:
#       kubernetes.io/ingress.class: nginx
#     hostname: grafana.dyego.lab
      
# Configurações removidas/corrigidas:
# - Removida a seção 'storageClass' de nível superior do Prometheus
# - Corrigida a estrutura de persistence do Grafana (storageClassName em vez de storageClass.create/name)
# - Corrigida a estrutura dos hosts do ingress do Grafana
# - Tag do Grafana entre aspas para garantir tratamento como string